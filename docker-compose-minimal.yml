services:
  x-common-sigic-frontend: &default-common-sigic-frontend
    image: ${COMPOSE_PROJECT_NAME}/sigic-frontend
    ports:
      - '3000:3000'
    restart: unless-stopped
    environment:
      NODE_ENV: ${NODE_ENV}
      NUXT_PUBLIC_GEONODE_URL: ${NUXT_PUBLIC_GEONODE_URL}
      NUXT_PUBLIC_GEONODE_API: ${NUXT_PUBLIC_GEONODE_API}
      NUXT_PUBLIC_GEOSERVER_URL: ${NUXT_PUBLIC_GEOSERVER_URL}
      NUXT_PUBLIC_IA_BACKEND_URL: ${NUXT_PUBLIC_IA_BACKEND_URL}

  sigic-frontend-main:
    <<: *default-common-sigic-frontend
    container_name: sigic-frontend-main4${COMPOSE_PROJECT_NAME}
    ports:
      - '${SF_MAIN_HOST_PORT}:3000'
    restart: unless-stopped
    environment:
      NUXT_PUBLIC_BASE_URL: ${SF_MAIN_NUXT_PUBLIC_BASE_URL}
      NUXT_PUBLIC_DEFAULT_PAGE: ${SF_MAIN_NUXT_PUBLIC_DEFAULT_PAGE}
      NUXT_PUBLIC_GEONODE_API_DEFAULT_FILTER: ${SF_MAIN_NUXT_PUBLIC_GEONODE_API_DEFAULT_FILTER}
      NUXT_PUBLIC_ENABLE_AUTH: ${SF_MAIN_NUXT_PUBLIC_ENABLE_AUTH}
      NUXT_PUBLIC_ENABLE_CATALOGO_VISTA: ${SF_MAIN_NUXT_PUBLIC_ENABLE_CATALOGO_VISTA}
      NUXT_PUBLIC_ENABLE_CATALOGO_CARGA: ${SF_MAIN_NUXT_PUBLIC_ENABLE_CATALOGO_CARGA}
      NUXT_PUBLIC_ENABLE_CONSULTA: ${SF_MAIN_NUXT_PUBLIC_ENABLE_CONSULTA}
      NUXT_PUBLIC_ENABLE_IAA: ${SF_MAIN_NUXT_PUBLIC_ENABLE_IAA}
      NUXT_AUTH_ORIGIN: ${SF_MAIN_NUXT_AUTH_ORIGIN}
      NUXT_PUBLIC_AUTH_BASE_URL: ${SF_MAIN_NUXT_PUBLIC_AUTH_BASE_URL}
      KEYCLOAK_ISSUER: ${SF_MAIN_KEYCLOAK_ISSUER}
      KEYCLOAK_CLIENT_ID: ${SF_MAIN_KEYCLOAK_CLIENT_ID}
      KEYCLOAK_CLIENT_SECRET: ${SF_MAIN_KEYCLOAK_CLIENT_SECRET}
      NUXT_AUTH_SECRET: ${SF_MAIN_NUXT_AUTH_SECRET}
      NUXT_PUBLIC_APP_BASE_PATH: ${SF_MAIN_NUXT_PUBLIC_APP_BASE_PATH}

  sigic-frontend-secondary:
    <<: *default-common-sigic-frontend
    container_name: sigic-frontend-secondary4${COMPOSE_PROJECT_NAME}
    ports:
      - '${SF_SECONDARY_HOST_PORT}:3000'
    restart: unless-stopped
    depends_on:
      sigic-frontend-main:
        condition: service_completed_successfully
    environment:
      NUXT_PUBLIC_BASE_URL: ${SF_SECONDARY_NUXT_NUXT_PUBLIC_BASE_URL}
      NUXT_PUBLIC_DEFAULT_PAGE: ${SF_SECONDARY_NUXT_NUXT_PUBLIC_DEFAULT_PAGE}
      NUXT_PUBLIC_GEONODE_API_DEFAULT_FILTER: ${SF_SECONDARY_NUXT_NUXT_PUBLIC_GEONODE_API_DEFAULT_FILTER}
      NUXT_PUBLIC_ENABLE_AUTH: ${SF_SECONDARY_NUXT_NUXT_PUBLIC_ENABLE_AUTH}
      NUXT_PUBLIC_ENABLE_CATALOGO_VISTA: ${SF_SECONDARY_NUXT_NUXT_PUBLIC_ENABLE_CATALOGO_VISTA}
      NUXT_PUBLIC_ENABLE_CATALOGO_CARGA: ${SF_SECONDARY_NUXT_NUXT_PUBLIC_ENABLE_CATALOGO_CARGA}
      NUXT_PUBLIC_ENABLE_CONSULTA: ${SF_SECONDARY_NUXT_NUXT_PUBLIC_ENABLE_CONSULTA}
      NUXT_PUBLIC_ENABLE_IAA: ${SF_SECONDARY_NUXT_NUXT_PUBLIC_ENABLE_IAA}
      NUXT_AUTH_ORIGIN: ${SF_SECONDARY_NUXT_NUXT_AUTH_ORIGIN}
      NUXT_PUBLIC_AUTH_BASE_URL: ${SF_SECONDARY_NUXT_NUXT_PUBLIC_AUTH_BASE_URL}
      KEYCLOAK_ISSUER: ${SF_SECONDARY_NUXT_KEYCLOAK_ISSUER}
      KEYCLOAK_CLIENT_ID: ${SF_SECONDARY_NUXT_KEYCLOAK_CLIENT_ID}
      KEYCLOAK_CLIENT_SECRET: ${SF_SECONDARY_NUXT_KEYCLOAK_CLIENT_SECRET}
      NUXT_AUTH_SECRET: ${SF_SECONDARY_NUXT_NUXT_AUTH_SECRET}
      NUXT_PUBLIC_APP_BASE_PATH: ${SF_SECONDARY_NUXT_NUXT_PUBLIC_APP_BASE_PATH}
